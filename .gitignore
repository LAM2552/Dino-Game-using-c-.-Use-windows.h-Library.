#include <iostream>
#include <conio.h>      // untuk _kbhit() dan _getch()
#include <windows.h>    // untuk Sleep() dan sistem("cls")
#include <ctime>
using namespace std;

bool gameOver;
const int width = 40;
const int height = 10;
int dinoY = height - 1;
bool isJumping = false;
int jumpCounter = 0;
int obstacleX = width - 1;
int score = 0;

void Draw() {
    system("cls");

    for (int y = 0; y < height; y++) {
        for (int x = 0; x < width; x++) {
            if (x == 5 && y == dinoY)
                cout << "{}"; // Dino fisik
            else if (x == obstacleX && y == height - 1)
                cout << "|"; // Rintangan
            else if (y == height - 1)
                cout << "_"; // tanah/permukaan
            else
                cout << " ";
        }
        cout << endl;
    }

    cout << "Score: " << score << endl;
    cout << "Press SPACE to jump. Press ESC to exit." << endl;
}

void Input() {
    if (_kbhit()) {
        char key = _getch();
        if (key == 32 && !isJumping) { // tombol spasi
            isJumping = true;
            jumpCounter = 3;
        } else if (key == 27) { // ESC(keluar)
            gameOver = true;
        }
    }
}

void Logic() {
    if (isJumping) {
        dinoY--;
        jumpCounter--;
        if (jumpCounter == 0) {
            isJumping = false;
        }
    } else if (dinoY < height - 1) {
        dinoY++; // gravitasi
    }

    obstacleX--;

    if (obstacleX == 5 && dinoY == height - 1) {
        gameOver = true; // Dino menabrak rintangan
    }

    if (obstacleX < 0) {
        obstacleX = width - 1;
        score++;
    }
}

int main() {
    gameOver = false;

    while (!gameOver) {
        Draw();
        Input();
        Logic();
        Sleep(50); // Waktu delay(atur kecep)
    }

    cout << "\nGame Over! Final Score: " << score << endl;
    system("pause");
    return 0;
}

